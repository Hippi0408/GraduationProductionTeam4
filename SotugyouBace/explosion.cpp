//==============================================================================================
//
// 爆発 		explosion.cpp
// tutida ryousei
//
//==============================================================================================
#include"explosion.h"

//==============================================================================================
// コンストラクタ
//==============================================================================================
CExplosion::CExplosion(const PRIORITY priority) : CMove_Object(priority)
{
}

//==============================================================================================
// デストラクタ
//==============================================================================================
CExplosion::~CExplosion()
{
}

//==============================================================================================
// 初期化処理
//==============================================================================================
HRESULT CExplosion::Init()
{
	CMove_Object::Init();

	// タグの設定
	SetTag(TAG_EXPLOSION);

	// 当たり判定の生成
	SetCollision({ 0.0f, 0.0f, 0.0f, 1.0f });

	return S_OK;
}

//==============================================================================================
// 終了処理
//==============================================================================================
void CExplosion::Uninit()
{
	CMove_Object::Uninit();
}

//==============================================================================================
// 更新処理
//==============================================================================================
void CExplosion::Update()
{
	m_nContinuation++;

	// 爆発の持続時間
	if (m_nContinuation > 60)
	{
		SetEndExplosion(true);
		Uninit();
	}
}

//==============================================================================================
// 描画処理
//==============================================================================================
void CExplosion::Draw()
{
}

//==============================================================================================
// ヒット
//==============================================================================================
void CExplosion::Hit(CMove_Object* pHit)
{
}

//==============================================================================================
// 生成処理
//==============================================================================================
CExplosion *CExplosion::Create(D3DXVECTOR3 pos, float radius, int power, const bool side, const CObject::PRIORITY priority)
{
	CExplosion *pExplosion = new CExplosion(priority);

	if (pExplosion != nullptr)
	{
		pExplosion->SetPos(pos);
		pExplosion->SetRadius(radius);
		pExplosion->SetPlayerSide(side);
		pExplosion->m_nPower = power;
		pExplosion->Init();
	}

	return pExplosion;
}