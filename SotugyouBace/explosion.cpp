//==============================================================================================
//
// 爆発 		explosion.cpp
// tutida ryousei
//
//==============================================================================================
#include"explosion.h"
#include "particle_emitter.h"

//==============================================================================================
// コンストラクタ
//==============================================================================================
CExplosion::CExplosion(const PRIORITY priority) : CMove_Object(priority)
{
}

//==============================================================================================
// デストラクタ
//==============================================================================================
CExplosion::~CExplosion()
{
}

//==============================================================================================
// 初期化処理
//==============================================================================================
HRESULT CExplosion::Init()
{
	CMove_Object::Init();

	// タグの設定
	SetTag(TAG_EXPLOSION);

	// 当たり判定の生成
	SetCollision();

	// 攻撃パーティクル
	std::move(CParticleEmitter::Create("Attack", { GetPos().x,GetPos().y + 100,GetPos().z }));

	return S_OK;
}

//==============================================================================================
// 終了処理
//==============================================================================================
void CExplosion::Uninit()
{
	CMove_Object::Uninit();
}

//==============================================================================================
// 更新処理
//==============================================================================================
void CExplosion::Update()
{
	Uninit();
}

//==============================================================================================
// 描画処理
//==============================================================================================
void CExplosion::Draw()
{
}

//==============================================================================================
// ヒット
//==============================================================================================
void CExplosion::Hit(CMove_Object* pHit)
{
}

//==============================================================================================
// 生成処理
//==============================================================================================
CExplosion *CExplosion::Create(D3DXVECTOR3 pos, float radius, int power, const bool side, const CObject::PRIORITY priority)
{
	CExplosion *pExplosion = new CExplosion(priority);

	if (pExplosion != nullptr)
	{
		pExplosion->SetPos(pos);
		pExplosion->SetRadius(radius);
		pExplosion->SetPlayerSide(side);
		pExplosion->m_nPower = power;
		pExplosion->Init();
	}

	return pExplosion;
}