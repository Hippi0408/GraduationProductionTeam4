//=============================================================================
//
// enemy.cpp
// Author : Tanimoto Kosuke
//
//=============================================================================
#include "enemy.h"
#include "enemy_manager.h"
#include "application.h"

//=====================================
// デフォルトコンストラクタ
//=====================================
CEnemy::CEnemy()
{
	// 生成時に自身のポインタを敵キャラマネージャーに設定
	CApplication::GetEnemyManager()->SetEnemy(this);
}

//=====================================
// デストラクタ
//=====================================
CEnemy::~CEnemy()
{
	CEnemyManager* pManager = CApplication::GetEnemyManager();

	// マネージャーが使用中の場合、解放時に自身のポインタを配列から除外する
	if (pManager != nullptr) pManager->DestroyEnemy(this);
}

//============================================================================
// 初期化処理
//============================================================================
HRESULT CEnemy::Init()
{
	// 当たり判定の生成
	SetCollision();

	// オブジェクトの種類に敵キャラを設定
	SetType(OBJ_TYPE_ENEMY);

	CCharacter::Init();

	return S_OK;
}

//============================================================================
// 終了処理
//============================================================================
void CEnemy::Uninit()
{
	CCharacter::Uninit();
}

//============================================================================
// 更新処理
//============================================================================
void CEnemy::Update()
{
	// キャラクターの更新
	CCharacter::Update();
}

//============================================================================
// 描画処理
//============================================================================
void CEnemy::Draw()
{
	CCharacter::Draw();
}

//============================================================================
// 被弾処理
//============================================================================
void CEnemy::Hit()
{
	Damage(30);
}